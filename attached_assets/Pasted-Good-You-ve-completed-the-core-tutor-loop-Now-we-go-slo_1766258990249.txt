Good. Youâ€™ve completed the **core tutor loop**.
Now we go **slowly** and do **only one small, useful thing next**.

---

# What you have achieved (important to recognise)

Right now your system can:

* Let the student **choose a topic**
* Ask questions **one by one**
* Check answers immediately
* Move to next question
* Finish a topic correctly

This means: **the tutor logic works**.

Now the problem you saw in the screenshot tells us the next step.

---

# The problem shown in your screenshot (simple words)

After this line:

> âœ… Correct! You've completed all questions in this topic.

You typed:

```
next
```

And the tutor **started the same question again**.

That should NOT happen.

---

# What should happen instead

When a topic is finished:

* The tutor should **stop asking questions**
* The tutor should say something like:

  > â€œThis topic is complete. Please choose another topic and start a new session.â€

So the next step is:

# NEXT STEP = Handle â€œtopic completedâ€ properly

---

## Step 1: Add a â€œCOMPLETEDâ€ state (very small change)

In your logic (backend), when there are **no more questions**:

You already detect this case.

Instead of allowing more answers, do this:

* Set session state to `COMPLETED`
* Do NOT fetch more questions
* Ignore user input like â€œnextâ€

---

## Step 2: Simple rule for COMPLETED state

In your `Turn()` logic, add this at the top:

```python
if state == tutoring_pb2.FsmState.COMPLETED:
    return tutoring_pb2.TurnResponse(
        session_id=request.session_id,
        next_state=tutoring_pb2.FsmState.COMPLETED,
        tutor_text="This topic is finished. Please select a new topic and click Start Session.",
        intent="completed"
    )
```

Thatâ€™s it.

This means:

* User typing anything after completion wonâ€™t restart questions
* Tutor stays calm and clear

---

## Step 3: UI behavior (very simple)

You do **nothing fancy**.

Just let the tutor message appear.

Optionally (later):

* Disable input box when topic is complete

But **not now**.

---

# How you test this (simple)

1. Start a topic
2. Finish all questions
3. Type anything (`next`, `hello`, `10`)
4. Tutor should reply:

   > â€œThis topic is finished. Please select a new topic and click Start Session.â€

If that happens â†’ done.

---

# DO NOT do these yet

* Resume session
* Parent reports
* Audio
* AI explanations
* Multi-language

Those come later.

---

# What comes AFTER this (preview, not now)

Once completion is handled cleanly, the next steps will be:

1. â€œResume last topicâ€ (optional)
2. Progress percentage per topic
3. Very simple parent report

But **only after completion handling is correct**.

---

## Your next action (one sentence)

ğŸ‘‰ Add a `COMPLETED` state check so finished topics cannot restart.

If you want, paste **only** the part of your `Turn()` function where you handle â€œno more questionsâ€, and Iâ€™ll show you the exact 3 lines to change.
