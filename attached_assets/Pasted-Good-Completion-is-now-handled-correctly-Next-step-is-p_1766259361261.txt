Good. Completion is now handled correctly. Next step is **progress tracking that a parent can understand**, with the smallest possible change.

# Next step (one thing): show “Progress: X / Y” for the selected topic

Right now the tutor finishes the topic, but you don’t show:

* how many questions were done
* how many remain
* percentage

Parents need that.

---

## What you will build (simple)

On the UI, show a line like:

**Progress (g6_math_add_01): 3 / 20 (15%)**

Update it after every answer.

---

# How to do it (minimal changes)

## Step 1: Create an API in `webapp.py`

Add an endpoint:

`GET /api/progress?student_id=...&topic_id=...`

It returns JSON:

```json
{ "correct": 3, "total": 20, "pct": 15 }
```

### What it calculates

* `total` = number of questions in `questions` table for that `topic_id`
* `correct` = number of correct answers in `attempts` table for that student + topic
* `pct` = correct / total * 100

---

## Step 2: Add a small progress area in `static/index.html`

Add one line:

```html
<div id="progress"></div>
```

---

## Step 3: After Start Session and after every Turn, call `/api/progress`

Update the `<div>` with the numbers.

---

# Why this is the correct next step

* tiny work
* immediately makes it feel like a real learning system
* sets you up for parent reports later

---

# One important correction (you must do this now)

In your screenshot text you wrote:

> saves state as “COMPLETED” instead of “COMPLETE”

Make sure your **proto enum and DB state names match**.
Pick one word and stick to it.

Recommended:

* `COMPLETED` everywhere (DB + proto + UI)

Mismatched names will cause random bugs later.

---

## If you want the exact SQL for progress (simple)

**Total questions:**

```sql
select count(*) from questions where topic_id = $1;
```

**Correct attempts:**

```sql
select count(*) from attempts
where student_id = $1 and topic_id = $2 and is_correct = true;
```

---

If you paste your `attempts` table columns (just names), I’ll give you the exact `webapp.py` endpoint code with no guessing.
